use vageesh;

show databases;

create database vageesh;

use vageesh;

drop database vageesh;

create database quiz;

use quiz;

create table questions(
	question_id int auto_increment primary key,
    question_text varchar(500),
    option_a varchar(255),
    option_b varchar(255),
    option_c varchar(255),
    option_d varchar(255),
    correct_option char(1) 
    
);

select * from questions;

INSERT INTO questions (question_text, option_a, option_b, option_c, option_d, correct_option) VALUES
('Who won the ICC Cricket World Cup 2011?', 'India', 'Sri Lanka', 'Australia', 'South Africa', 'A'),
('Who was the Man of the Tournament in the 2019 Cricket World Cup?', 'Ben Stokes', 'Kane Williamson', 'Rohit Sharma', 'David Warner', 'B'),
('Which bowler took a hat-trick in the 2019 World Cup?', 'Mitchell Starc', 'Mohammad Shami', 'Jasprit Bumrah', 'Trent Boult', 'B'),
('Who scored the fastest T20I century for India in 2017?', 'KL Rahul', 'Rohit Sharma', 'Suryakumar Yadav', 'Virat Kohli', 'B'),
('Which team won the ICC Champions Trophy 2013?', 'India', 'England', 'Pakistan', 'Sri Lanka', 'A'),
('Who was the captain of India during the 2021 World Test Championship Final?', 'Virat Kohli', 'Rohit Sharma', 'MS Dhoni', 'Ajinkya Rahane', 'A'),
('Who became the first Indian to score 200 in ODI after 2010?', 'Sachin Tendulkar', 'Rohit Sharma', 'Virender Sehwag', 'Shubman Gill', 'A'),
('Which country won the 2021 T20 World Cup?', 'Australia', 'New Zealand', 'England', 'Pakistan', 'A'),
('Which Indian bowler took 10 wickets in a Test innings in 2021?', 'Ravichandran Ashwin', 'Harbhajan Singh', 'Jasprit Bumrah', 'Ajaz Patel', 'D'),
('Who won the Orange Cap in IPL 2020?', 'KL Rahul', 'Shikhar Dhawan', 'David Warner', 'AB de Villiers', 'A'),
('Which team won the Asia Cup 2018?', 'India', 'Pakistan', 'Sri Lanka', 'Bangladesh', 'A'),
('Who hit 5 sixes in one over for India in 2022 against Sri Lanka?', 'Shreyas Iyer', 'Hardik Pandya', 'Ravindra Jadeja', 'Deepak Hooda', 'B'),
('Who won the ICC Under-19 Cricket World Cup 2018?', 'India', 'Australia', 'Pakistan', 'South Africa', 'A');


INSERT INTO questions (question_text, option_a, option_b, option_c, option_d, correct_option) VALUES
('Who won the FIFA World Cup 2014?', 'Germany', 'Argentina', 'Brazil', 'Spain', 'A'),
('Which player won the Ballon d''Or in 2021?', 'Lionel Messi', 'Cristiano Ronaldo', 'Robert Lewandowski', 'Kylian Mbappé', 'A'),
('Which club won the UEFA Champions League 2020?', 'Bayern Munich', 'PSG', 'Real Madrid', 'Liverpool', 'A'),
('Who scored the fastest goal in Euro 2020?', 'Cristiano Ronaldo', 'Patrik Schick', 'Kevin De Bruyne', 'Luke Shaw', 'D'),
('Who won the UEFA Euro 2016 tournament?', 'France', 'Portugal', 'Germany', 'Italy', 'B'),
('Which country won the Copa América 2021?', 'Argentina', 'Brazil', 'Chile', 'Colombia', 'A'),
('Who was the top scorer of FIFA World Cup 2022?', 'Kylian Mbappé', 'Lionel Messi', 'Harry Kane', 'Benzema', 'A');


create table admin(
 adminId int auto_increment primary key,
 username varchar(100) not null unique,
 password varchar(100) not null 
 
);

insert into admin(username,password) values ('admin','admin123');




DBConnection.java

package com.proj3.util;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;

public class DBConnection {
	private static final String URL="jdbc:mysql://localhost:3306/quiz?useSSL=false&serverTimezone=UTC";
	private static final String USER="root";
	private static final String PASS="root@39";
	
	public static Connection getConnection() throws SQLException {
		return DriverManager.getConnection(URL,USER,PASS);
	}

}



AdminLoginServlet.java

package com.proj3.servlet;

import jakarta.servlet.http.HttpServlet;
import java.io.IOException;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;

import jakarta.servlet.Servlet;
import jakarta.servlet.ServletException;
import jakarta.servlet.annotation.WebServlet;
import jakarta.servlet.http.HttpServletRequest;
import jakarta.servlet.http.HttpServletResponse;
import jakarta.servlet.http.HttpSession;

import com.proj3.util.DBConnection;

/**
 * Servlet implementation class AdminLoginServlet
 */
@WebServlet("/AdminLoginServlet")
public class AdminLoginServlet extends HttpServlet implements Servlet {
	private static final long serialVersionUID = 1L;

    /**
     * Default constructor. 
     */
    public AdminLoginServlet() {
        // TODO Auto-generated constructor stub
    }

	/**
	 * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
	 */
	protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		// TODO Auto-generated method stub
		response.getWriter().append("Served at: ").append(request.getContextPath());
	}

	/**
	 * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
	 */
	protected void doPost(HttpServletRequest request, HttpServletResponse response)
	        throws ServletException, IOException {

	    String username = request.getParameter("username");
	    String password = request.getParameter("password");

	    if (username == null || password == null || username.trim().isEmpty() || password.trim().isEmpty()) {
	        request.setAttribute("error", "Username and password are required");
	        request.getRequestDispatcher("/adminLogin.jsp").forward(request, response);
	        return;
	    }

	    String sql = "SELECT admin_id, username FROM admin WHERE username = ? AND password = ?";

	    try (Connection conn = DBConnection.getConnection();
	         PreparedStatement ps = conn.prepareStatement(sql)) {

	        ps.setString(1, username);
	        ps.setString(2, password);

	        try (ResultSet rs = ps.executeQuery()) {

	            if (rs.next()) {
	                int adminId = rs.getInt("admin_id");

	                HttpSession session = request.getSession(true);
	                session.setAttribute("adminId", adminId);
	                session.setAttribute("adminUsername", rs.getString("username"));

	                response.sendRedirect(request.getContextPath() + "/admin_dashboard.jsp");
	                return;
	            } else {
	                request.setAttribute("error", "Invalid username or password");
	                request.getRequestDispatcher("/adminLogin.jsp").forward(request, response);
	                return;
	            }
	        }

	    } catch (SQLException e) {
	        throw new ServletException("Database error while authenticating admin", e);
	    }
	}

}

pom.xml dependencies:

 <dependency>
    <groupId>jakarta.servlet</groupId>
    <artifactId>jakarta.servlet-api</artifactId>
    <version>6.1.0</version>
    <scope>provided</scope>
	</dependency>



adminLogin.jsp


<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Admin Login</title>
</head>
<body>

	<h2> Admin Login</h2>
	
	<c:if test="${not empty error }">
		<div style="color:red"> ${error } </div>
	</c:if>
	
	

</body>
</html>


create views folder, seperate packages
